image: "trion/ng-cli"

app-build:
  before_script:
    - npm install
  stage: build
  artifacts:
    paths:
      - dist/
  script: ng build --prod

deploy-production:
  stage: deploy
  dependencies:
    - app-build
  script: firebase deploy --non-interactive --token $FIREBASE_TOKEN
  only:
    - master

